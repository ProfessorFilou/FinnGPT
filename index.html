<html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>Finn 1.2 üåë</title>

<!-- Favicon -->
<link rel="icon" type="image/jpeg" href="ProfessorFilou_LOGO.jpg">

<style>
body { margin:0; font-family: Arial, sans-serif; background:#1e1e1e; color:#e0e0e0; display:flex; flex-direction:column; height:100vh;}
#topBar { display:flex; justify-content:flex-end; padding:10px 20px; background:#2d2d2d; gap:10px; align-items:center; }
#profile { width:50px; height:50px; border-radius:50%; background:#6cb6ff; display:flex; justify-content:center; align-items:center; font-size:24px; cursor:pointer; margin-right:auto; }
button { background:#fff; color:#1e1e1e; border:none; border-radius:15px; padding:5px 15px; cursor:pointer; }
#chat { flex:1; overflow-y:auto; padding:20px; scroll-behavior:smooth; }
.message { margin:10px 0; max-width:80%; padding:10px 15px; border-radius:15px; animation:fadeIn 0.3s; }
.user { background:#2d2d2d; align-self:flex-end; color:#9cdcfe; }
.bot { background:#3c3c3c; align-self:flex-start; color:#dcdcaa; }
#inputArea { display:flex; padding:10px; background:#2d2d2d; }
#userInput { flex:1; padding:12px 15px; border-radius:25px; border:none; background:#3c3c3c; color:#e0e0e0; font-size:16px; }
#sendBtn { margin-left:10px; border:none; border-radius:50%; width:50px; height:50px; background:white; color:#1e1e1e; cursor:pointer; display:flex; justify-content:center; align-items:center; font-size:20px; transition:transform 0.2s; }
#sendBtn:hover { transform:scale(1.1); }
footer { text-align:center; padding:10px; font-size:12px; color:#888; background:#1b1b1b; }
a { color:#6cb6ff; text-decoration:none; }

#welcome { text-align:center; margin:40px 0; font-size:36px; font-weight:bold; background:linear-gradient(90deg,#ff6ec7,#6cb6ff,#ffeb3b,#ff6ec7); -webkit-background-clip:text; color:transparent; }
#welcomeContainer { display:flex; flex-direction:column; align-items:center; justify-content:center; }

@keyframes fadeIn { from {opacity:0} to {opacity:1} }

/* Popups */
.popup {
  position:fixed; top:50%; left:50%; transform:translate(-50%,-50%);
  background:#2d2d2d; color:#e0e0e0; padding:20px; border-radius:15px;
  display:none; flex-direction:column; gap:10px; z-index:100;
}
.popup input, .popup textarea { padding:10px; border-radius:10px; border:none; background:#3c3c3c; color:#fff; width:300px; }
.popup button { align-self:flex-end; }
.overlay {
  position:fixed; top:0; left:0; width:100%; height:100%;
  background:rgba(0,0,0,0.5); display:none; z-index:50;
}

/* --- Responsive Design --- */

/* Smartphones */
@media (max-width: 600px) {
  body { font-size: 16px; }
  #topBar { flex-direction: row; gap: 5px; padding: 8px; }
  #profile { width: 40px; height: 40px; font-size: 20px; }
  button { padding: 8px 12px; font-size: 14px; border-radius: 10px; }
  #chat { padding: 10px; }
  .message { max-width: 95%; font-size: 14px; }
  #userInput { font-size: 14px; padding: 10px; }
  #sendBtn { width: 45px; height: 45px; font-size: 18px; }
  #welcome { font-size: 24px; margin: 20px 0; }
  .popup { width: 90%; }
  .popup input, .popup textarea { width: 100%; font-size: 14px; }
}

/* Tablets */
@media (min-width: 601px) and (max-width: 1024px) {
  body { font-size: 18px; }
  #topBar { padding: 10px 15px; }
  #profile { width: 45px; height: 45px; font-size: 22px; }
  button { padding: 10px 15px; font-size: 15px; }
  #chat { padding: 15px; }
  .message { max-width: 90%; font-size: 15px; }
  #userInput { font-size: 16px; padding: 12px; }
  #sendBtn { width: 50px; height: 50px; font-size: 20px; }
  #welcome { font-size: 28px; }
  .popup { width: 70%; }
  .popup input, .popup textarea { width: 100%; font-size: 15px; }
}
</style>
</head>
<body>

<div id="topBar">
  <div id="profile">üòä</div>
  <button id="contactBtn">Kontakt</button>
  <button id="adminBtn">Admin</button>
</div>

<div id="welcomeContainer">
  <div id="welcome">Willkommen zur√ºck, <span id="welcomeName">Gast</span>!</div>
</div>

<div id="chat"></div>
<div id="inputArea">
  <input id="userInput" placeholder="Schreib was..." />
  <button id="sendBtn">‚úàÔ∏è</button>
</div>

<footer>¬© Finn v. Khreninger</footer>

<!-- Popups -->
<div class="overlay" id="overlay"></div>

<!-- Kontakt-Popup mit Formspree -->
<div class="popup" id="contactPopup">
  <h2>Kontakt</h2>
  <form action="https://formspree.io/f/mldlyoqw" method="POST" style="display:flex; flex-direction:column; gap:10px;">
    <input type="text" name="name" placeholder="Name" required>
    <input type="email" name="email" placeholder="E-Mail" required>
    <textarea name="message" placeholder="Nachricht" required rows="5"></textarea>
    <button type="submit">Senden</button>
  </form>
</div>

<div class="popup" id="adminPopup">
  <h2>Admin-Bereich</h2>
  <p>Hier darf nur der Admin rein üòâ</p>
  <button id="closeAdmin">Schlie√üen</button>
</div>

<script>
// Nutzername
let userName = localStorage.getItem("userName") || "Gast";
document.getElementById("welcomeName").textContent = userName;

// Wissen
let knowledgeBase = [
  { patterns:[/hi/i,/hallo/i,/hey/i], responses:["Hi! Wie l√§uft's heute?","Hey, cool dich zu sehen üòé"] },
  { patterns:[/minecraft/i], responses:["Minecraft ist mega! Welche Mods benutzt du?"] },
  { patterns:[/wie lange gibt es minecraft/i,/seit wann gibt es minecraft/i], responses:["Minecraft wurde 2009 ver√∂ffentlicht."] },
  { patterns:[/.*/], responses:["Hmm, dazu hab ich leider nichts gefunden üòÖ"] }
];

// Bot-Antwort
async function getBotResponse(message){
  for(const entry of knowledgeBase){
    if(entry.patterns.some(p=>p.test(message))){
      return entry.responses[Math.floor(Math.random()*entry.responses.length)];
    }
  }
  return "Hmm, dazu hab ich leider nichts gefunden üòÖ";
}

// Chat-Funktion
const chatDiv = document.getElementById("chat");
const userInput = document.getElementById("userInput");
const sendBtn = document.getElementById("sendBtn");
const welcomeContainer = document.getElementById("welcomeContainer");

async function sendMessage(){
  const message = userInput.value.trim();
  if(!message) return;
  if(welcomeContainer.style.display !== "none"){
    welcomeContainer.style.display="none";
  }
  chatDiv.innerHTML += `<div class="message user">Du: ${message}</div>`;
  userInput.value="";
  chatDiv.scrollTop=chatDiv.scrollHeight;
  const reply = await getBotResponse(message);
  chatDiv.innerHTML += `<div class="message bot">FinnGPT: ${reply}</div>`;
  chatDiv.scrollTop=chatDiv.scrollHeight;
}

sendBtn.addEventListener("click", sendMessage);
userInput.addEventListener("keypress", e=>{ if(e.key==="Enter") sendMessage(); });

// Profilname √§ndern
const profile = document.getElementById("profile");
const welcomeName = document.getElementById("welcomeName");
profile.addEventListener("click", ()=>{
  const newName = prompt("Neuen Namen eingeben:", userName);
  if(newName){
    userName = newName;
    localStorage.setItem("userName",userName);
    welcomeName.textContent = userName;
  }
});

// Buttons & Popups
const contactBtn = document.getElementById("contactBtn");
const adminBtn = document.getElementById("adminBtn");
const overlay = document.getElementById("overlay");
const contactPopup = document.getElementById("contactPopup");
const adminPopup = document.getElementById("adminPopup");
const closeAdmin = document.getElementById("closeAdmin");

function showPopup(popup){
  overlay.style.display="block";
  popup.style.display="flex";
}
function closePopup(popup){
  overlay.style.display="none";
  popup.style.display="none";
}

contactBtn.addEventListener("click", ()=> showPopup(contactPopup));
adminBtn.addEventListener("click", ()=> showPopup(adminPopup));
closeAdmin.addEventListener("click", ()=> closePopup(adminPopup));
overlay.addEventListener("click", ()=>{
  closePopup(contactPopup);
  closePopup(adminPopup);
});
</script>

</body>
</html>

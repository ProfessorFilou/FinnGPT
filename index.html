<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>Finn 1.4 üåë</title>
<link rel="icon" type="image/jpeg" href="ProfessorFilou_LOGO.jpg">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: #1e1e1e;
  color: #e0e0e0;
  display: flex;
  flex-direction: column;
  min-height: 100vh;
}
#topBar {
  display: flex;
  justify-content: flex-end;
  padding: 10px 20px;
  background: #2d2d2d;
  gap: 10px;
  align-items: center;
  flex-wrap: wrap;
}
#profile {
  width: 50px;
  height: 50px;
  border-radius: 50%;
  background: #6cb6ff;
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 24px;
  cursor: pointer;
  margin-right: auto;
}
button {
  background: #fff;
  color: #1e1e1e;
  border: none;
  border-radius: 15px;
  padding: 5px 15px;
  cursor: pointer;
  white-space: nowrap;
}
#chat {
  flex: 1;
  overflow-y: auto;
  padding: 20px;
  scroll-behavior: smooth;
}
.message {
  margin: 10px 0;
  max-width: 80%;
  padding: 10px 15px;
  border-radius: 15px;
  animation: fadeIn 0.3s;
}
.user { background: #2d2d2d; align-self: flex-end; color: #9cdcfe; }
.bot { background: #3c3c3c; align-self: flex-start; color: #dcdcaa; }
#inputArea {
  display: flex;
  padding: 10px;
  background: #2d2d2d;
  gap: 10px;
  flex-wrap: wrap;
}
#userInput {
  flex: 1;
  padding: 12px 15px;
  border-radius: 25px;
  border: none;
  background: #3c3c3c;
  color: #e0e0e0;
  font-size: 16px;
  min-width: 0;
}
#sendBtn {
  border: none;
  border-radius: 50%;
  width: 50px;
  height: 50px;
  background: white;
  color: #1e1e1e;
  cursor: pointer;
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 20px;
  transition: transform 0.2s;
  flex-shrink: 0;
}
#sendBtn:hover { transform: scale(1.1); }
footer {
  text-align: center;
  padding: 10px;
  font-size: 12px;
  color: #888;
  background: #1b1b1b;
}
a { color: #6cb6ff; text-decoration: none; }
#welcome {
  text-align: center;
  margin: 40px 0;
  font-size: 36px;
  font-weight: bold;
  background: linear-gradient(90deg,#ff6ec7,#6cb6ff,#ffeb3b,#ff6ec7);
  -webkit-background-clip: text;
  color: transparent;
}
#welcomeContainer {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}
@keyframes fadeIn { from {opacity:0} to {opacity:1} }
.popup {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%,-50%);
  background: #2d2d2d;
  color: #e0e0e0;
  padding: 20px;
  border-radius: 15px;
  display: none;
  flex-direction: column;
  gap: 10px;
  z-index: 100;
  width: 90%;
  max-width: 400px;
}
.popup input, .popup textarea {
  padding: 10px;
  border-radius: 10px;
  border: none;
  background: #3c3c3c;
  color: #fff;
  width: 100%;
}
.popup button { align-self: flex-end; }
.overlay {
  position: fixed;
  top:0; left:0;
  width: 100%;
  height: 100%;
  background: rgba(0,0,0,0.5);
  display: none;
  z-index: 50;
}

/* RESPONSIVE */
@media (max-width: 768px) {
  #topBar { gap: 5px; padding: 10px; }
  #profile { width: 40px; height: 40px; font-size: 20px; }
  button { padding: 5px 10px; font-size: 14px; }
  #welcome { font-size: 28px; margin: 20px 0; }
  #chat { padding: 10px; font-size: 14px; }
  .message { max-width: 95%; font-size: 14px; }
  #userInput { font-size: 14px; padding: 10px; }
  #sendBtn { width: 45px; height: 45px; font-size: 18px; }
}
@media (max-width: 480px) {
  #welcome { font-size: 22px; }
  button { font-size: 12px; padding: 4px 8px; }
  #profile { width: 35px; height: 35px; font-size: 18px; }
  #sendBtn { width: 40px; height: 40px; font-size: 16px; }
}
</style>
</head>

<body>
<div id="topBar">
  <div id="profile">üòä</div>
  <button id="contactBtn">Kontakt</button>
  <button id="gameBtn">Spiel</button>
</div>

<div id="welcomeContainer">
  <div id="welcome">Willkommen zur√ºck, <span id="welcomeName">Gast</span>!</div>
</div>

<div id="chat"></div>
<div id="inputArea">
  <input id="userInput" placeholder="Schreib was..." />
  <button id="sendBtn">‚úàÔ∏è</button>
</div>

<footer>¬© Finn v. Khreninger</footer>

<div class="overlay" id="overlay"></div>
<div class="popup" id="contactPopup">
  <form action="https://formspree.io/f/mldlyoqw" method="POST" style="display:flex; flex-direction:column; gap:10px;">
    <label>Name:</label>
    <input type="text" name="name" required>
    <label>E-Mail:</label>
    <input type="email" name="email" required>
    <label>Nachricht:</label>
    <textarea name="message" rows="4" required></textarea>
    <div style="display:flex; justify-content:space-between; margin-top:5px;">
      <button type="submit">Senden</button>
      <button type="button" onclick="closePopup()">Schlie√üen</button>
    </div>
  </form>
</div>

<script>
// Nutzername speichern
let userName = localStorage.getItem("userName") || "Gast";
document.getElementById("welcomeName").textContent = userName;

// Einfacher Bot
const knowledgeBase = [
  { patterns:[/hi/i,/hallo/i,/hey/i], responses:["Hi! Wie l√§uft's heute?","Hey, cool dich zu sehen üòé"] },
  { patterns:[/minecraft/i], responses:["Minecraft ist mega! Welche Mods benutzt du?"] },
  { patterns:[/wie lange gibt es minecraft/i,/seit wann gibt es minecraft/i], responses:["Minecraft wurde 2009 ver√∂ffentlicht."] },
  { patterns:[/fun fact/i,/witzig/i,/spa√ü/i], responses:["Wusstest du? Katzen k√∂nnen √ºber 100 verschiedene Laute machen! üê±","Ein Fun Fact: Das Herz eines Blauwals ist so gro√ü wie ein Auto! üêã"] },
];

function evaluateMath(input){
  try{
    if(/^[0-9+\-*/().\s]+$/.test(input)){
      return eval(input);
    }
  } catch(e){}
  return null;
}

async function getBotResponse(message){
  message = message.toLowerCase().trim();
  const mathResult = evaluateMath(message);
  if(mathResult !== null) return `Rechnung gel√∂st: ${mathResult}`;

  for(const entry of knowledgeBase){
    if(entry.patterns.some(p=>p.test(message))){
      return entry.responses[Math.floor(Math.random()*entry.responses.length)];
    }
  }
  if(message.includes("zahl raten")) return "Ok, ich denke an eine Zahl zwischen 1-10. Versuch sie zu erraten!";
  
  return "Hmm, dazu hab ich leider nichts gefunden üòÖ";
}

// Chat-Funktion
const chatDiv = document.getElementById("chat");
const userInput = document.getElementById("userInput");
const sendBtn = document.getElementById("sendBtn");
const welcomeContainer = document.getElementById("welcomeContainer");

async function sendMessage(){
  const message = userInput.value.trim();
  if(!message) return;

  if(welcomeContainer.style.display !== "none"){
    welcomeContainer.style.display="none";
  }

  chatDiv.innerHTML += `<div class="message user">Du: ${message}</div>`;
  userInput.value = "";
  chatDiv.scrollTop = chatDiv.scrollHeight;

  const botResponse = await getBotResponse(message);
  chatDiv.innerHTML += `<div class="message bot">Bot: ${botResponse}</div>`;
  chatDiv.scrollTop = chatDiv.scrollHeight;
}
sendBtn.addEventListener("click", sendMessage);
userInput.addEventListener("keypress", e=>{ if(e.key==="Enter") sendMessage(); });

// Name √§ndern
document.getElementById("profile").addEventListener("click", ()=>{
  const newName = prompt("Wie soll dein Name hei√üen?", userName);
  if(newName){
    userName = newName;
    localStorage.setItem("userName", userName);
    document.getElementById("welcomeName").textContent = userName;
  }
});

// Popup √∂ffnen
const contactPopup = document.getElementById("contactPopup");
const overlay = document.getElementById("overlay");
document.getElementById("contactBtn").addEventListener("click", ()=>{ overlay.style.display="block"; contactPopup.style.display="flex"; });
function closePopup(){ overlay.style.display="none"; contactPopup.style.display="none"; }
overlay.addEventListener("click", closePopup);

// Spiel-Button leitet auf deine Website weiter
document.getElementById("gameBtn").addEventListener("click", ()=>{
    window.open("https://professorfilou.github.io/EmojiClick2001-ULTRA/","_blank");
});
</script>

</body>
</html>
